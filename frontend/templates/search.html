{% extends "base.html" %}

{% block page %}

<h3 class="red"><span class="fa fa-search"></span> Search</h3>

<div class="row">
	<div class="col-sm-3">
		{% block top_links %}
		<form>
			<input type="hidden" name="q" value="{{ q }}">
			<input type="hidden" name="filter[start_date]" value="{{ filters.start_date }}">
			<input type="hidden" name="filter[end_date]" value="{{ filters.end_date }}">
			<input type="hidden" name="filter[type]" value="{{ filters.type }}">
			{% include 'committee_select.html' %}
		</form>

		<div class="list-group">
			<a class="list-group-item {% if (filters.type == None) %}active{% endif %}" href="{{ url }}/?q={{ q }}&amp;filter[start_date]={{filters['start_date']}}&amp;filter[end_date]={{filters['end_date']}}"><b>All Types</b></a>

			{% for data_type, name in search_types %}
				{% if bincount[data_type] %}
				<a class="list-group-item {% if (filters.type == data_type) %}active{% endif %}" href="{{ url }}/?q={{ q }}&amp;filter[type]={{ data_type }}&amp;filter[start_date]={{filters['start_date']}}&amp;filter[end_date]={{filters['end_date']}}">{{ name }}<span class="badge">{{ bincount[data_type] }}</span></a>
				{% endif %}
			{% endfor %}
		</div>

		<div class="list-group">
			<a class="list-group-item {% if (filters["start_date"] == None) %}active{% endif %}" href="{{ url }}/?q={{ q }}&amp;filter[type]={{filters.type}}"><b>All Years</b></a>

			{% for year in years %}
				{% if yearcount[year] %}
					<a class="list-group-item {% if (filters["start_date"] == year|string + "-01-01") %}active{% endif %}" href="{{ url }}/?q={{ q }}&amp;filter[type]={{filters.type}}&amp;filter[start_date]={{year}}-01-01&amp;filter[end_date]={{year}}-12-31">{{year}} <span class="badge">{{ yearcount[year] }}</span></a>
				{% endif %}
			{% endfor %}
		</div>
		{% endblock %}
	</div>

	<div class="col-sm-9 justify-p">
		<h5>Total Results: {{ count }}</h5>
		<table class="table table-striped table-bordered">
			{% for result in results %}
			<tr>
				<td>
					{% include result._type + '_stub.html' %}
				</td>
			</tr>
			{% endfor %}
		</table>

		{% include 'pagination.html' %}
	</div>
</div>


{% endblock %}

